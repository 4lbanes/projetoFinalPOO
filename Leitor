package Entidades;
import java.io.*;
import java.util.*;

public class Leitor {

	private ArrayList<Franquia> franquias;

	public Leitor() {
		franquias = new ArrayList<>();
	}

	public Franquia realizarJogo(Franquia franquiaA, Franquia franquiaB) {
		int contadorA = 0;
		int contadorB = 0;
		Scanner sc = new Scanner(System.in);

		for (int i = 0; contadorA < 4 && contadorB < 4; i++) {
			int resultadoA = 0; 
			int resultadoB = 0; 

			try {
				System.out.println((i + 1) + "ª partida entre " + franquiaA.getNome() + " e " + franquiaB.getNome());
				System.out.println("Qual foi o placar do jogo " + (i + 1) + " para os " + franquiaA.getNome());
				resultadoA = sc.nextInt();

				System.out.println("Qual foi o placar do jogo " + (i + 1) + " para os " + franquiaB.getNome());
				resultadoB = sc.nextInt();

				if (resultadoA > resultadoB) {
					contadorA++;
				} else {
					contadorB++;
				}

			} catch (InputMismatchException e) {
				System.out.println("Caractere inválido! Resultados inseridos: 0");
				sc.nextLine(); 
			}
		}

		Franquia vencedora = (contadorA == 4) ? franquiaA : franquiaB;

		if (contadorA == 4) {
			System.out.println(franquiaA.getNome() + " venceu essa série!!!");
		} else {
			System.out.println(franquiaB.getNome() + " venceu essa série!!!");
		}
		return vencedora;
	}

	public void lerResultadosDosJogos(String arquivoResultados) {
	    try {
	        File file = new File(arquivoResultados);
	        Scanner scanner = new Scanner(file);

	        // Leitura dos resultados dos jogos
	        while (scanner.hasNextLine()) {
	            String linha = scanner.nextLine();
	            String[] partes = linha.split(" ");
	            String nomeFranquiaA = partes[0];
	            String nomeFranquiaB = partes[1];

	            Franquia franquiaA = encontrarFranquiaPorNome(nomeFranquiaA);
	            Franquia franquiaB = encontrarFranquiaPorNome(nomeFranquiaB);

	            if (franquiaA != null && franquiaB != null) {
	                realizarJogo(franquiaA, franquiaB);
	            } else {
	                System.out.println("Franquia não encontrada.");
	            }
	        }

	        scanner.close();
	    } catch (FileNotFoundException e) {
	        e.printStackTrace();
	    }
	}


	private Franquia encontrarFranquiaPorNome(String nomeFranquia) {
	    for (Franquia franquia : franquias) {
	        if (franquia.getNome().equals(nomeFranquia)) {
	            return franquia;
	        }
	    }
	    return null; 
	}


	public void recebeFranquias(ArrayList<Franquia> franquiasOeste, ArrayList<Franquia> franquiasLeste) {
		this.franquias.addAll(franquiasOeste);
		this.franquias.addAll(franquiasLeste);
	}
}
